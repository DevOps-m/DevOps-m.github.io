<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>流转千回</title>
  
  <subtitle>技术成长之路</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://devops-m.github.io/"/>
  <updated>2019-09-23T07:12:18.070Z</updated>
  <id>https://devops-m.github.io/</id>
  
  <author>
    <name>李志强</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>使用autofs自动挂载NFS网络文件系统</title>
    <link href="https://devops-m.github.io/2019/09/23/shi-yong-autofs-zi-dong-gua-zai-nfs-wang-luo-wen-jian-xi-tong/"/>
    <id>https://devops-m.github.io/2019/09/23/shi-yong-autofs-zi-dong-gua-zai-nfs-wang-luo-wen-jian-xi-tong/</id>
    <published>2019-09-23T07:13:00.000Z</published>
    <updated>2019-09-23T07:12:18.070Z</updated>
    
    <content type="html"><![CDATA[<h4 id="系统信息："><a href="#系统信息：" class="headerlink" title="系统信息："></a>系统信息：</h4><table><thead><tr><th>系统版本</th><th>内核版本</th><th>NFS版本</th></tr></thead><tbody><tr><td>CentOS Linux release 7.6.1810 (Core)</td><td>3.10.0-957.el7.x86_64</td><td>1.3.0</td></tr></tbody></table><blockquote><p>PS：这里不介绍部署NFS网络共享文件系统内容。</p></blockquote><h4 id="部署过程："><a href="#部署过程：" class="headerlink" title="部署过程："></a>部署过程：</h4><blockquote><p>参考文献：<a href="https://www.linuxtechi.com/automount-nfs-share-in-linux-using-autofs/" target="_blank" rel="noopener">https://www.linuxtechi.com/automount-nfs-share-in-linux-using-autofs/</a></p></blockquote><ol><li><p>安装autofs软件：</p><pre><code>yum install -y autofs</code></pre></li><li><p>向/etc/auto.master内增加内容：<br>```<br>root@xxx:~# tail /etc/auto.master</p><h1 id="Include-central-master-map-if-it-can-be-found-using"><a href="#Include-central-master-map-if-it-can-be-found-using" class="headerlink" title="Include central master map if it can be found using"></a>Include central master map if it can be found using</h1><h1 id="nsswitch-sources"><a href="#nsswitch-sources" class="headerlink" title="nsswitch sources."></a>nsswitch sources.</h1><p>#</p><h1 id="Note-that-if-there-are-entries-for-net-or-misc-as"><a href="#Note-that-if-there-are-entries-for-net-or-misc-as" class="headerlink" title="Note that if there are entries for /net or /misc (as"></a>Note that if there are entries for /net or /misc (as</h1><h1 id="above-in-the-included-master-map-any-keys-that-are-the"><a href="#above-in-the-included-master-map-any-keys-that-are-the" class="headerlink" title="above) in the included master map any keys that are the"></a>above) in the included master map any keys that are the</h1><h1 id="same-will-not-be-seen-as-the-first-read-key-seen-takes"><a href="#same-will-not-be-seen-as-the-first-read-key-seen-takes" class="headerlink" title="same will not be seen as the first read key seen takes"></a>same will not be seen as the first read key seen takes</h1><h1 id="precedence"><a href="#precedence" class="headerlink" title="precedence."></a>precedence.</h1><p>#</p></li></ol><p>+auto.master<br>/ /etc/auto.fs     // 此行为增加内容;<br>root@xxx:~# </p><pre><code>3. 创建/etc/auto.fs，如存在则直接添加以下内容即可：</code></pre><p>mnt -fstype=nfs,vers=4,minorversion=0,noatime,nodiratime,nosuid,noexec,nodev,ro,bg,soft,_netdev nfs.xxx.com:/data/renderdata</p><pre><code>4. 将autofs服务设置开机自启并启动：</code></pre><p>root@xxx:<del># systemctl enable autofs.service<br>root@xxx:</del># systemctl start autofs.service<br>root@xxx:~# systemctl status autofs.service</p><pre><code>5. 测试autofs部署情况：</code></pre><p>ops@xxx:<del>$ df -h<br>Filesystem             Size  Used Avail Use% Mounted on<br>/dev/mapper/vg01-root  200G  4.0G  196G   2% /<br>devtmpfs                63G     0   63G   0% /dev<br>tmpfs                   63G     0   63G   0% /dev/shm<br>tmpfs                   63G   11M   63G   1% /run<br>tmpfs                   63G     0   63G   0% /sys/fs/cgroup<br>/dev/sda2              497M  132M  365M  27% /boot<br>/dev/sda1              500M   12M  489M   3% /boot/efi<br>/dev/mapper/vg01-data  3.1T   38M  3.1T   1% /data<br>tmpfs                   13G     0   13G   0% /run/user/1000<br>ops@xxx:</del>$</p><p>ops@xxx:<del>$ ls /mnt/<br>exportgeometry  modelvrscene  renderingvrscene  scripts<br>ops@xxx:</del>$ </p><p>ops@xxx:<del>$ df -h<br>Filesystem                          Size  Used Avail Use% Mounted on<br>/dev/mapper/vg01-root               200G  4.0G  196G   2% /<br>devtmpfs                             63G     0   63G   0% /dev<br>tmpfs                                63G     0   63G   0% /dev/shm<br>tmpfs                                63G   11M   63G   1% /run<br>tmpfs                                63G     0   63G   0% /sys/fs/cgroup<br>nfs.xxx.com:/data/renderdata        4.0T  1.2T  2.9T  29% /mnt<br>/dev/sda2                           497M  132M  365M  27% /boot<br>/dev/sda1                           500M   12M  489M   3% /boot/efi<br>/dev/mapper/vg01-data               3.1T   38M  3.1T   1% /data<br>tmpfs                                13G     0   13G   0% /run/user/1000<br>ops@xxx:</del>$<br>```</p><blockquote><p>PS：可以看到测试过程如上所示。</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;系统信息：&quot;&gt;&lt;a href=&quot;#系统信息：&quot; class=&quot;headerlink&quot; title=&quot;系统信息：&quot;&gt;&lt;/a&gt;系统信息：&lt;/h4&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;系统版本&lt;/th&gt;
&lt;th&gt;内核版本&lt;/th&gt;
&lt;th&gt;NFS版本&lt;/t
      
    
    </summary>
    
      <category term="Linux" scheme="https://devops-m.github.io/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://devops-m.github.io/tags/Linux/"/>
    
  </entry>
  
</feed>
